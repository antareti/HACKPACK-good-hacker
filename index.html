<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Hacker 3D — CMD Emulator (#FF4500)</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;800&display=swap" rel="stylesheet">
<style>
:root{
  --accent:#FF4500;
  --bg:#0b0b0f;
  --bg-soft:#0f1117;
  --fg:#e6e6e6;
  --muted:#9aa4b2;
  --glass: rgba(255,69,0,0.08);
  --shadow: 0 10px 30px rgba(255,69,0,0.15), 0 2px 10px rgba(0,0,0,0.5);
}
*{box-sizing:border-box;}
html,body{height:100%; margin:0; font-family:'JetBrains Mono', monospace; color:var(--fg); background:var(--bg);}
.grid-bg{position:fixed; inset:0; pointer-events:none; z-index:-2;
background: linear-gradient(transparent 24px, rgba(255,255,255,0.04) 25px),
linear-gradient(90deg, transparent 24px, rgba(255,255,255,0.04) 25px);
background-size:25px 25px; transform:perspective(900px) rotateX(55deg) translateY(-15vh);
filter:drop-shadow(0 0 10px rgba(255,69,0,0.25)); animation:gridFloat 14s ease-in-out infinite alternate;}
@keyframes gridFloat{to{transform:perspective(900px) rotateX(60deg) translateY(-12vh) translateX(2vw)}}
canvas#rain{position:fixed; inset:0; z-index:-3; opacity:.35;}
header{padding:20px 6vw; display:flex; justify-content:space-between; align-items:center;}
.logo{display:flex; gap:12px; text-decoration:none; color:var(--fg);}
.brand{font-weight:800; letter-spacing:.08em; font-size:24px;}
.btn{border:1px solid rgba(255,69,0,0.5); background:var(--glass); color:var(--fg); padding:10px 14px; border-radius:12px; cursor:pointer; text-decoration:none; box-shadow:var(--shadow);}
.btn:hover{transform:translateY(-2px); border-color:var(--accent);}
main{padding:16px 6vw 64px;}
.panel{background:linear-gradient(to bottom right, rgba(255,69,0,0.08), rgba(255,69,0,0.02)); border:1px solid rgba(255,69,0,0.5); border-radius:18px; box-shadow:var(--shadow); overflow:hidden;}
.hd{display:flex; align-items:center; gap:10px; padding:12px 14px; border-bottom:1px solid rgba(255,69,0,0.35);}
.led{width:8px; height:8px; border-radius:999px; background:var(--accent); box-shadow:0 0 8px var(--accent),0 0 20px rgba(255,69,0,0.8);}
.title{font-weight:700;}
.cmd-wrap{padding:14px;}
.cmd-window{background:#000; color:#dcdcdc; border:1px solid #222; border-radius:10px; overflow:hidden; box-shadow:0 12px 28px rgba(0,0,0,.45);}
.cmd-title{background:#0c3c78; color:#fff; padding:6px 10px; font-size:12px; display:flex; justify-content:space-between; align-items:center;}
.wbtns{display:flex; gap:6px;}
.wbtn{width:12px; height:12px; border-radius:2px; background:#e5e7eb; opacity:.9;}
.cmd-body{padding:10px; height:420px; overflow:auto; font-size:14px; line-height:1.35; font-family:Consolas,'JetBrains Mono',monospace;}
.line{white-space:pre-wrap;}
.prompt{color:#dcdcdc;}
.path{color:#9cdcfe;}
.cursor{display:inline-block; width:7px; height:1.2em; background:#dcdcdc; margin-left:1px; transform:translateY(3px); animation:blink 1.05s steps(2) infinite;}
@keyframes blink{50%{opacity:0}}
.cmd-body::selection, .line::selection{background:#444; color:#fff;}
footer{padding:18px 6vw 54px; color:var(--muted); text-align:center;}
</style>
</head>
<body>
<div class="grid-bg"></div>
<canvas id="rain"></canvas>
<header>
  <a class="logo" href="#"><div class="brand">Hacker 3D</div></a>
  <div class="actions">
    <a class="btn" href="#" id="btn-full">Полноэкранный режим</a>
    <a class="btn" href="#" id="btn-copy">Скопировать CMD</a>
  </div>
</header>
<main>
  <section class="panel">
    <div class="hd"><span class="led"></span><div class="title">Консоль</div></div>
    <div class="cmd-wrap">
      <div class="cmd-window" id="cmdwin">
        <div class="cmd-title"><span>Командная строка</span><span class="wbtns"><span class="wbtn"></span><span class="wbtn"></span><span class="wbtn"></span></span></div>
        <div class="cmd-body" id="term" tabindex="0"></div>
      </div>
    </div>
  </section>
</main>
<footer>Сделано с любовью к <b style="color:var(--accent)">#FF4500</b></footer>

<script>
(function(){
const term=document.getElementById('term');
const state={path:['C:','Users','Guest'],history:[],historyIndex:-1,buffer:'',caret:0,fs:{'C:':{'Users':{'Guest':{'readme.txt':'HACKPACK — Good Hacker\nВерсия 1.0','projects':{'hacker3d':{'index.html':'<!-- site -->'}}}}}}};
const joinPath=a=>a.join('\\');
function getNode(pathArr){let node=state.fs;for(const part of pathArr){if(typeof node!=='object'||!(part in node))return null;node=node[part];}return node;}
function isDir(node){return node&&typeof node==='object'&&!('length' in node);}
function print(text=''){const div=document.createElement('div');div.className='line';div.textContent=text;term.appendChild(div);term.scrollTop=term.scrollHeight;}
function promptLine(){const line=document.createElement('div');line.className='line';line.id='current-line';const path=`<span class="path">${joinPath(state.path)}&gt;</span> `;line.innerHTML=`<span class="prompt">${path}</span><span id="buf-left"></span><span class="cursor"></span><span id="buf-right"></span>`;term.appendChild(line);term.scrollTop=term.scrollHeight;renderBuffer();state.caret=state.buffer.length;}
function renderBuffer(){document.getElementById('buf-left').textContent=state.buffer.slice(0,state.caret);document.getElementById('buf-right').textContent=state.buffer.slice(state.caret);}
function clearScreen(){term.innerHTML='';}
function parseArgs(s){const out=[];let cur='';let q=null;for(let i=0;i<s.length;i++){const ch=s[i];if(q){if(ch===q){q=null;continue;}if(ch==='\\'&&s[i+1]===q){cur+=q;i++;continue;}cur+=ch;}else{if(ch==='"'||ch=="'"){q=ch;continue;}if(/\s/.test(ch)){if(cur){out.push(cur);cur='';}}else cur+=ch;}}if(cur)out.push(cur);return out;}
const commands={
help(){['HELP DIR CD CLS ECHO TYPE IPCONFIG PING'].forEach(l=>print(l));},
cls(){clearScreen();},
echo(...a){print(a.join(' '));},
dir(){const node=getNode(state.path);if(!isDir(node)){print('Ошибка каталога.');return;}Object.keys(node).sort().forEach(f=>print(f));},
cd(p=''){if(!p)return;let parts=p.replace(/\//g,'\\').split('\\').filter(Boolean);let newPath=[...state.path];for(const part of parts){if(part==='..'){if(newPath.length>1)newPath.pop();continue;}const probe=getNode([...newPath,part]);if(!probe||!isDir(probe)){print('Не найден путь');return;}newPath.push(part);}state.path=newPath;},
type(f=''){const node=getNode([...state.path,f]);if(typeof node==='string')node.split('\n').forEach(l=>print(l));else print('Файл не найден');}
};
function execute(line){const [cmdRaw,...rest]=parseArgs(line);if(!cmdRaw)return;const cmd=cmdRaw.toLowerCase();const h=commands[cmd];if(h){setTimeout(()=>h(...rest),50);}else print(`'${cmdRaw}' не является командой`);}
function submitCurrent(){const p=document.getElementById('current-line');if(p){p.innerHTML=`<span class="prompt"><span class="path">${joinPath(state.path)}&gt;</span> </span>`+state.buffer;}if(state.buffer.trim()){state.history.push(state.buffer);state.historyIndex=state.history.length;}const line=state.buffer;state.buffer='';state.caret=0;execute(line);setTimeout(promptLine,50);}
function moveCaret(delta){state.caret=Math.max(0,Math.min(state.buffer.length,state.caret+delta));renderBuffer();}
term.addEventListener('keydown',e=>{
if(e.key==='ArrowUp'){if(state.history.length&&state.historyIndex>0){state.historyIndex--;state.buffer=state.history[state.historyIndex];state.caret=state.buffer.length;}e.preventDefault();return;}
if(e.key==='ArrowDown'){if(state.history.length&&state.historyIndex<state.history.length-1){state.historyIndex++;state.buffer=state.history[state.historyIndex];}else{state.historyIndex=state.history.length;state.buffer='';}state.caret=state.buffer.length;renderBuffer();e.preventDefault();return;}
if(e.key==='ArrowLeft'){moveCaret(-1);e.preventDefault();return;}
if(e.key==='ArrowRight'){moveCaret(1);e.preventDefault();return;}
if(e.key==='Home'){state.caret=0;renderBuffer();e.preventDefault();return;}
if(e.key==='End'){state.caret=state.buffer.length;renderBuffer();e.preventDefault();return;}
if(e.key==='Backspace'){if(state.caret>0){state.buffer=state.buffer.slice(0,state.caret-1)+state.buffer.slice(state.caret);state.caret--;renderBuffer();}e.preventDefault();return;}
if(e.key==='Delete'){if(state.caret<state.buffer.length){state.buffer=state.buffer.slice(0,state.caret)+state.buffer.slice(state.caret+1);renderBuffer();}e.preventDefault();return;}
if(e.key==='Enter'){submitCurrent();e.preventDefault();return;}
if(e.ctrlKey||e.metaKey)return;if(e.key.length===1){state.buffer=state.buffer.slice(0,state.caret)+e.key+state.buffer.slice(state.caret);state.caret++;renderBuffer();e.preventDefault();return;}
});
term.addEventListener('paste',e=>{const text=(e.clipboardData||window.clipboardData).getData('text');if(text){const clean=text.replace(/\r/g,'');state.buffer=state.buffer.slice(0,state.caret)+clean+state.buffer.slice(state.caret);state.caret+=clean.length;renderBuffer();e.preventDefault();}});
term.focus();
promptLine();
})();
</script>
</body>
</html>
